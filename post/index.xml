<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on The D3bug Blog</title><link>https://nick-graves.github.io/post/</link><description>Recent content in Posts on The D3bug Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 26 Jan 2026 19:50:27 -0800</lastBuildDate><atom:link href="https://nick-graves.github.io/post/index.xml" rel="self" type="application/rss+xml"/><item><title>HTB: ReactOOPS</title><link>https://nick-graves.github.io/post/reactoops/</link><pubDate>Mon, 26 Jan 2026 19:50:27 -0800</pubDate><guid>https://nick-graves.github.io/post/reactoops/</guid><description>&lt;img src="https://nick-graves.github.io/post/images/ReactOOPS.jpg" alt="Featured image of post HTB: ReactOOPS" /&gt;&lt;h1 id="htb-reactoops"&gt;HTB: ReactOOPS
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Difficulty: Very Easy&lt;/li&gt;
&lt;li&gt;Category: Web&lt;/li&gt;
&lt;li&gt;Solved: 1/26/2026&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="challenge-description"&gt;Challenge Description
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;NexusAI&amp;rsquo;s polished assistant interface promises adaptive learning and seamless interaction. But beneath its reactive front end, subtle glitches hint that user input may be shaping the system in unexpected ways. Explore the platform, trace the echoes in its reactive layer, and uncover the hidden flaw buried behind the UI.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src="https://nick-graves.github.io/post/images/ReactOOPS_webpage.png"
loading="lazy"
alt="Alt text"
&gt;&lt;/p&gt;
&lt;h2 id="recon"&gt;Recon
&lt;/h2&gt;&lt;p&gt;I started by digging around the codebase which led to a few key findings:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;package.json&lt;/code&gt; - Revealed the package name &lt;code&gt;react2shell&lt;/code&gt; along with the frameworks versions
&lt;ul&gt;
&lt;li&gt;Next.js &lt;code&gt;16.0.6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;React &lt;code&gt;^19&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;Dockerfile&lt;/code&gt; showed a flag located at &lt;code&gt;/app/flag.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since the challenge description hinted at user input but there were no input forms on the page this seemed to indicate that the vulnerability was in the framework no the application code.&lt;/p&gt;
&lt;h2 id="vulnerability-identification"&gt;Vulnerability Identification
&lt;/h2&gt;&lt;p&gt;A quick google search of &amp;ldquo;react2shell&amp;rdquo; (just using my resources not cheating &amp;hellip; right?) pointed towards a a known vulnerability &lt;a class="link" href="https://nvd.nist.gov/vuln/detail/CVE-2025-55182" target="_blank" rel="noopener"
&gt;CVE-2025-55182&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="how-the-vulnerability-works"&gt;How the Vulnerability Works
&lt;/h2&gt;&lt;p&gt;The vulnerability exists in React&amp;rsquo;s Flight protocol deserializer, specifically in the &lt;code&gt;getOutlinedModel()&lt;/code&gt; function in &lt;code&gt;ReactFlightReplyServer.js&lt;/code&gt;. A missing &lt;code&gt;hasOwnProperty&lt;/code&gt; check during property traversal allows prototype chain pollution.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Vulnerable code
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;let&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;i&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;; &lt;span style="color:#a6e22e"&gt;i&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;path&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;length&lt;/span&gt;; &lt;span style="color:#a6e22e"&gt;i&lt;/span&gt;&lt;span style="color:#f92672"&gt;++&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;value&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;[&lt;span style="color:#a6e22e"&gt;path&lt;/span&gt;[&lt;span style="color:#a6e22e"&gt;i&lt;/span&gt;]]; &lt;span style="color:#75715e"&gt;// No hasOwnProperty check!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The attack chain then looks something like this:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Send a reference like &lt;code&gt;$1:__proto__:then&lt;/code&gt; in a POST request&lt;/li&gt;
&lt;li&gt;This traverses the prototype chain to reach &lt;code&gt;Chunk.prototype.then&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;React interprets the object as a Promise (due to the &lt;code&gt;.then&lt;/code&gt; property)&lt;/li&gt;
&lt;li&gt;When React awaits the &amp;ldquo;Promise&amp;rdquo;, it executes attacker-controlled code&lt;/li&gt;
&lt;li&gt;The code runs in Node.js context with server privileges&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="exploitation"&gt;Exploitation
&lt;/h2&gt;&lt;p&gt;I used an exploit script that I found on &lt;a class="link" href="https://github.com/freeqaz/react2shell/tree/master" target="_blank" rel="noopener"
&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./exploit-redirect.sh http://&amp;lt;TARGET&amp;gt;:&amp;lt;PORT&amp;gt;/ &lt;span style="color:#e6db74"&gt;&amp;#34;cat /app/flag.txt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To get this result&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;+&lt;span style="color:#f92672"&gt;]&lt;/span&gt; HTTP &lt;span style="color:#ae81ff"&gt;303&lt;/span&gt; - Redirect exfil successful
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;+&lt;span style="color:#f92672"&gt;]&lt;/span&gt; Command output:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;----------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;HTB&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&amp;lt;flag&amp;gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;----------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="takeaways"&gt;Takeaways
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;You are only as strong as your weakest framework. In this example the application code was sound but an exploit in the framework left is vulnerable.&lt;/li&gt;
&lt;li&gt;Sometimes the answer is in the package.json! It would never be this easy in the real world but for these little puzzles combing through the files can hold all kinds of little (or big) hints.&lt;/li&gt;
&lt;li&gt;The initial exploit triggered RCE but didn&amp;rsquo;t return output. Using Next.js&amp;rsquo;s redirect mechanism allowed us to capture command output via response headers.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="references"&gt;References
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://nvd.nist.gov/vuln/detail/CVE-2025-55182" target="_blank" rel="noopener"
&gt;https://nvd.nist.gov/vuln/detail/CVE-2025-55182&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.trendmicro.com/en_us/research/25/l/CVE-2025-55182-analysis-poc-itw.html" target="_blank" rel="noopener"
&gt;https://www.trendmicro.com/en_us/research/25/l/CVE-2025-55182-analysis-poc-itw.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.wiz.io/blog/critical-vulnerability-in-react-cve-2025-55182" target="_blank" rel="noopener"
&gt;https://www.wiz.io/blog/critical-vulnerability-in-react-cve-2025-55182&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components" target="_blank" rel="noopener"
&gt;https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Vide Coding with Claude Code</title><link>https://nick-graves.github.io/post/vibe_coding/</link><pubDate>Fri, 23 Jan 2026 13:37:29 -0800</pubDate><guid>https://nick-graves.github.io/post/vibe_coding/</guid><description>&lt;img src="https://nick-graves.github.io/post/images/claude_code.jpg" alt="Featured image of post Vide Coding with Claude Code" /&gt;&lt;h1 id="vibe-coding-but-for-real-building-with-claude-code-and-multi-agent-ai"&gt;Vibe Coding, But for Real: Building with Claude Code and Multi-Agent AI
&lt;/h1&gt;&lt;h2 id="1-vibe-coding-what-i-thought-it-was-vs-what-i-tried"&gt;1. Vibe Coding (What I Thought It Was vs What I Tried)
&lt;/h2&gt;&lt;p&gt;Before this project, I had already been using AI a lot while coding, but mostly in a pretty shallow way. It was basically a better search engine. I’d ask it how something worked, grab a small snippet, tweak it, and move on. Helpful, but not game-changing. It never really felt like part of my workflow more so like a shortcut when I got stuck.&lt;/p&gt;
&lt;p&gt;I had also tried coding agents before. When Gemini CLI first came out and was free, I played around with it a bit. But I didn’t really put any effort into setting it up properly. I just used it straight out of the box, didn’t give it any instructions, didn’t define how I wanted it to behave, and didn’t add things like a &lt;code&gt;GEMINI.md&lt;/code&gt; file. Unsurprisingly, the results were pretty underwhelming. It felt random, and I quickly wrote it off as not that useful.&lt;/p&gt;
&lt;p&gt;At the same time, I kept seeing people do genuinely impressive things with Claude. Not just writing snippets, but actually building features, refactoring code, and managing larger changes. That got my attention. It felt like there was something I was missing, not just a better model.&lt;/p&gt;
&lt;p&gt;So I decided to take a more intentional approach. Instead of treating the AI like a black box, I wanted to see what would happen if I actually customized it. That meant using things like Claude Code, defining behavior with &lt;code&gt;claude.md&lt;/code&gt; files, assigning skills, and generally trying to treat the agent more like a developer than a tool.&lt;/p&gt;
&lt;p&gt;The goal was to see if, with the right setup and structure, vibe coding could turn into something more capable and whether all the hype around Claude Code was actually justified.&lt;/p&gt;
&lt;h2 id="2-the-project-why-i-finally-built-it"&gt;2. The Project (Why I Finally Built It)
&lt;/h2&gt;&lt;p&gt;The project I used as a testbed is a &lt;strong&gt;local-first personal financial dashboard&lt;/strong&gt;. It tracks portfolios, spending data, and historical performance, and it includes an AI assistant that can answer questions about your financial situation.&lt;/p&gt;
&lt;p&gt;This is a project I’ve wanted to build for a long time. The reason I never did was simple. It felt like too much effort for the value it would provide. Between backend logic, frontend UI (especially this), data handling, and security concerns, it always felt like one of those ideas that’s cool in theory but not worth the time investment.&lt;/p&gt;
&lt;p&gt;Vibe coding changed that cost benefit analysis.&lt;/p&gt;
&lt;p&gt;With AI helping carry some of the load, this went from “probably not worth it” to “actually doable.” The dashboard itself still took work, but AI made it realistic to build something I would have otherwise kept on a todo list forever.&lt;/p&gt;
&lt;p&gt;That’s why I chose it. It’s complex enough to expose where this approach works and where it doesn’t.&lt;/p&gt;
&lt;h2 id="3-security-and-privacy-were-non-negotiable"&gt;3. Security and Privacy Were Non-Negotiable
&lt;/h2&gt;&lt;p&gt;Security was a huge concern from day one. The idea of having API access to all of my financial accounts made me uncomfortable, especially in a project that involved heavy AI usage. Even if it’s technically possible to do this securely, it felt like adding unnecessary risk.&lt;/p&gt;
&lt;p&gt;So I took a strict approach:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No stored credentials&lt;/li&gt;
&lt;li&gt;No direct bank or brokerage APIs&lt;/li&gt;
&lt;li&gt;No cloud-hosted AI models&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Instead, the dashboard relies on manually provided data (like CSVs) and &lt;strong&gt;local-only AI&lt;/strong&gt; using Ollama. Everything runs on my machine, and nothing sensitive ever leaves it.&lt;/p&gt;
&lt;p&gt;This decision shaped the entire project. It limited some convenience, but it also made the system easier to reason about and trust. If something breaks, it breaks locally. If something leaks, it’s my fault not an API key sitting somewhere I forgot about.&lt;/p&gt;
&lt;h2 id="4-the-ai-inside-the-dashboard-not-the-one-writing-code"&gt;4. The AI Inside the Dashboard (Not the One Writing Code)
&lt;/h2&gt;&lt;p&gt;It’s important to separate two different uses of AI in this project.&lt;/p&gt;
&lt;p&gt;The first is &lt;strong&gt;AI helping me build the project&lt;/strong&gt;, which I’ll get to later.&lt;br&gt;
The second is &lt;strong&gt;the AI agent that exists inside the dashboard itself&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The dashboard includes an AI assistant that can answer questions about your financial situation. The key here is the context. The agent is given structured access to things like portfolio holdings, spending patterns, historical snapshots, and trends over time.&lt;/p&gt;
&lt;p&gt;On top of that, it can optionally use web search to pull in general market or asset-level context. The key detail here is that the web search augments &lt;em&gt;external knowledge&lt;/em&gt;, not personal data. Your financial information stays local, while public information comes from outside.&lt;/p&gt;
&lt;p&gt;That combination turned out to be really powerful. The AI isn’t guessing or speaking in generalities it’s responding based on your actual numbers. At the same time, it isn’t sending those numbers anywhere. It’s a good example of how AI can be genuinely helpful without being invasive.&lt;/p&gt;
&lt;h2 id="5-using-claude-code-to-actually-build-the-system"&gt;5. Using Claude Code to Actually Build the System
&lt;/h2&gt;&lt;p&gt;To build all of this, I relied heavily on &lt;strong&gt;Claude Code&lt;/strong&gt;. This felt very different from using AI as a normal chat assistant. Instead of asking isolated questions, I was delegating real chunks of work.&lt;/p&gt;
&lt;p&gt;Claude Code felt less like autocomplete and more like working with a developer who could take initiative, but still needed clear direction and review. When that direction was missing, things got messy fast. When it was clear, the results were honestly impressive.&lt;/p&gt;
&lt;p&gt;That realization led me to experiment with a more structured, multi-agent approach.&lt;/p&gt;
&lt;h2 id="6-multi-agent-vibe-coding-with-git-branches"&gt;6. Multi-Agent Vibe Coding with Git Branches
&lt;/h2&gt;&lt;p&gt;One of the most effective setups I used was a &lt;strong&gt;multi-agent workflow&lt;/strong&gt; built around Git branches.&lt;/p&gt;
&lt;p&gt;I split work across three sub-agents, each focused on a specific area like frontend changes, backend logic, or AI-related code. Each agent worked on its own branch and handled a narrow set of tasks instead of touching everything at once.&lt;/p&gt;
&lt;p&gt;On top of that, I had a supervising agent whose job was to review changes, approve merges, or push back with feedback. That agent didn’t write much code itself it mostly acted as a reviewer.&lt;/p&gt;
&lt;p&gt;This structure mattered more than I expected. It reduced chaos, made mistakes easier to undo, and prevented the codebase from drifting in random directions. It felt a lot closer to managing a small team than “vibe coding” in the usual sense.&lt;/p&gt;
&lt;h2 id="7-claudemd-files-and-borrowing-from-others"&gt;7. CLAUDE.md Files (And Borrowing from Others)
&lt;/h2&gt;&lt;p&gt;The thing that made this setup work was &lt;code&gt;CLAUDE.md&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;These files define how Claude should behave inside a project. At first, mine was pretty barebones. Over time, I started expanding it and honestly, I didn’t do that alone. I borrowed ideas from other people’s &lt;code&gt;CLAUDE.md&lt;/code&gt; files that I found on GitHub, stealing bits and pieces that reflected good coding practices, architectural discipline, and clear boundaries.&lt;/p&gt;
&lt;p&gt;Things like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What parts of the codebase are off-limits&lt;/li&gt;
&lt;li&gt;How to think about changes vs refactors&lt;/li&gt;
&lt;li&gt;When to ask questions instead of guessing&lt;/li&gt;
&lt;li&gt;How strict to be about structure and readability&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This turned out to be one of the highest-leverage things I did. The better the instructions got, the better the AI behaved. Without them, the AI felt unpredictable. With them, it felt surprisingly consistent.&lt;/p&gt;
&lt;h2 id="8-claude-code-skills-and-frontend-design"&gt;8. Claude Code Skills and Frontend Design
&lt;/h2&gt;&lt;p&gt;One Claude Code feature that stood out was &lt;strong&gt;skills&lt;/strong&gt;, especially the &lt;code&gt;/frontend-design&lt;/code&gt; skill.&lt;/p&gt;
&lt;p&gt;By the time I used it, my UI technically worked but looked very “vibe coded.” Everything was there, but everything looked average. Instead of rewriting logic or removing features, I constrained the skill very tightly. The instructions were basically: don’t delete anything, don’t change data, just improve layout, spacing, and visual hierarchy.&lt;/p&gt;
&lt;p&gt;That constraint made a huge difference. The UI didn’t magically become perfect, but it went from looking hacked together to looking like something someone actually designed.&lt;/p&gt;
&lt;h3 id="original-ui"&gt;Original UI
&lt;/h3&gt;&lt;p&gt;&lt;img src="https://nick-graves.github.io/post/images/old_ui_redacted.png"
loading="lazy"
alt="Alt text"
&gt;&lt;/p&gt;
&lt;h3 id="refined-ui-after-frontend-design-skill"&gt;Refined UI After Frontend-Design Skill
&lt;/h3&gt;&lt;p&gt;&lt;img src="https://nick-graves.github.io/post/images/new_ui1_redacted.png"
loading="lazy"
alt="Alt text"
&gt;
&lt;img src="https://nick-graves.github.io/post/images/new_ui2_redacted.png"
loading="lazy"
alt="Alt text"
&gt;
&lt;img src="https://nick-graves.github.io/post/images/new_ui3_redacted.png"
loading="lazy"
alt="Alt text"
&gt;
&lt;img src="https://nick-graves.github.io/post/images/new_ui4_redacted.png"
loading="lazy"
alt="Alt text"
&gt;
&lt;img src="https://nick-graves.github.io/post/images/new_ui5_redacted.png"
loading="lazy"
alt="Alt text"
&gt;
&lt;img src="https://nick-graves.github.io/post/images/new_ui6_redacted.png"
loading="lazy"
alt="Alt text"
&gt;
&lt;img src="https://nick-graves.github.io/post/images/new_ui7.png"
loading="lazy"
alt="Alt text"
&gt;&lt;/p&gt;
&lt;p&gt;NOTE: Some features were added after the &lt;code&gt;/frontend-design&lt;/code&gt; UI update.&lt;/p&gt;
&lt;h2 id="9-the-token-problem-it-adds-up-fast"&gt;9. The Token Problem (It Adds Up Fast)
&lt;/h2&gt;&lt;p&gt;This approach is effective, but it burns tokens fast.&lt;/p&gt;
&lt;p&gt;Running multiple agents, keeping large context windows, and iterating often adds up quickly. I definitely noticed how fast usage climbed, especially when agents were working in parallel or reviewing large diffs. I could burn through all my tokens in 5 minutes if I wan&amp;rsquo;t careful.&lt;/p&gt;
&lt;p&gt;Even so, the tradeoff felt worth it. The speed, the learning, and the quality of the end result outweighed the cost for me but it’s not something to ignore. This style of development is powerful, but it isn’t free.&lt;/p&gt;
&lt;h2 id="10-closing-thoughts"&gt;10. Closing Thoughts
&lt;/h2&gt;&lt;p&gt;This project made one thing very clear to me: the biggest limitation in AI-assisted development isn’t the model. It’s how well you can structure work, give instructions, and review output.&lt;/p&gt;
&lt;p&gt;Vibe coding can work, but only when it’s paired with clear boundaries, good documentation, and thoughtful review.&lt;/p&gt;</description></item><item><title>Active Directory Lab</title><link>https://nick-graves.github.io/post/active_directory/</link><pubDate>Wed, 07 Jan 2026 09:57:52 -0800</pubDate><guid>https://nick-graves.github.io/post/active_directory/</guid><description>&lt;img src="https://nick-graves.github.io/post/images/active_directory.jpg" alt="Featured image of post Active Directory Lab" /&gt;&lt;h1 id="active-directory"&gt;Active Directory
&lt;/h1&gt;&lt;h2 id="wikipedia"&gt;Wikipedia
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Active Directory (AD) is a directory service developed by Microsoft for Windows domain networks. Windows Server operating systems include it as a set of processes and services.&lt;!-- raw HTML omitted --&gt;[1][2]&lt;!-- raw HTML omitted --&gt; Originally, only centralized domain management used Active Directory. However, it ultimately became an umbrella title for various directory-based identity-related services.&lt;!-- raw HTML omitted --&gt;[3]&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="chatgpt"&gt;ChatGPT
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Active Directory (AD) is a centralized directory and identity management system used in Windows-based networks. It allows organizations to manage users, computers, permissions, and security policies from one place.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="what-does-this-mean"&gt;What does this mean?
&lt;/h2&gt;&lt;p&gt;Active Directory is a term that I have encountered a few times. But every time it is accompanied by a vague and wide sweeping definition like the ones seen above leaving me with an arms length understanding. So today I am going to attempt to squash my ignorance and implement a very VERY basic AD network. The plan is to create a a few virtual machines to simulate a basic network with AD governing it.&lt;/p&gt;
&lt;h2 id="ad-basics"&gt;AD Basics
&lt;/h2&gt;&lt;p&gt;Before I begin I want to familiarize myself with some AD terminology.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Domain Controller (DC)&lt;/strong&gt;: The server that is running AD and holds the directory database.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Domain&lt;/strong&gt;: A logical boundary that contains objects such as users, computers, and groups, and provides centralized authentication and authorization.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tree&lt;/strong&gt;: A collection of domains with contiguous namespace (sales.corp.com &amp;amp; engineering.corp.com).
&lt;ul&gt;
&lt;li&gt;Namespace refers to the &amp;ldquo;corp&amp;rdquo; in that domain. Both sales and engineering both share the same namespace&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Forest&lt;/strong&gt;: A collection of one or more trees&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Organization Unit (OU)&lt;/strong&gt;: A container within a domain that organizes users computers or other OUs.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-set-up-the-vms"&gt;1. Set up the VMs
&lt;/h2&gt;&lt;p&gt;I will begin with only two VMs.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Windows server 2022&lt;/strong&gt;: This will be my DC.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Windows 11&lt;/strong&gt;: This will be the workstation.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;VirtualBox by Oracle with be my hypervisor of choice. Setting these up is pretty straight forward. Just downloading the ISOs from the Microsoft website and configuring the system requirements for each system.&lt;/p&gt;
&lt;p&gt;One small &amp;ldquo;gotcha&amp;rdquo; here is ensuring that both VMs are on the same virtual network. Under the &amp;ldquo;network&amp;rdquo; tab of each VM you can configure the network setting for each system. The default is &amp;ldquo;NAT&amp;rdquo;. NAT lets your VM access external networks (like the internet) by sharing the host machine’s IP address. This will not work for us since other machines cannot initiate connection to the VM. We will need to select &amp;ldquo;Internal Network&amp;rdquo;. This creates a private virtual switch inside VirtualBox. This means our devices cannot connect to the outside internet but they can connect to each other.&lt;/p&gt;
&lt;h2 id="2-windows-server-config"&gt;2. Windows Server Config
&lt;/h2&gt;&lt;p&gt;We begin with the basic set up, language, region, installation type, etc. The key here is the administrator password. This will function as our master password and allow us access into the DC to configure everything else. It has access to just about everything so I kept it very secure by setting it as &amp;ldquo;Adminpass123&amp;rdquo;. Upon reboot we can now login as the administrator. For simplicity sake I renamed this machine to DC01.&lt;/p&gt;
&lt;p&gt;Now it is time to configure the network. The first thing we will do is set up a static IP. But first we must get out network adapter which, in powershell can be done with the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Get-NetAdapter
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Taking note of the name of this adapter, we can now reconfigure. We can rename it to a name of our choosing and also set up our IP address and our subnet mask. In this case I&amp;rsquo;m using &lt;code&gt;192.168.50.10&lt;/code&gt; and a subnet mask of the first 24 bits. In laymans terms, this just means all devices on this subnet can only change values after the last &amp;ldquo;.&amp;rdquo;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;New-NetIPAddress `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -InterfaceAlias &lt;span style="color:#e6db74"&gt;&amp;#34;Ethernet0&amp;#34;&lt;/span&gt; `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -IPAddress &lt;span style="color:#ae81ff"&gt;192.168&lt;/span&gt;.50.10 `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -PrefixLength &lt;span style="color:#ae81ff"&gt;24&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now we will configure DNS. This is critical for AD. This DC will act as the DNS server for the rest of the network. If we use a basic DNS server like Google&amp;rsquo;s &lt;code&gt;8.8.8.8&lt;/code&gt; it will have no way of finding our other devices. Fortunately, this is much easier than I originally thought. All it takes is the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Set-DnsClientServerAddress `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -InterfaceAlias &lt;span style="color:#e6db74"&gt;&amp;#34;Ethernet0&amp;#34;&lt;/span&gt; `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -ServerAddresses &lt;span style="color:#ae81ff"&gt;192.168&lt;/span&gt;.50.10
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now we must turn this server into the DC. We still don&amp;rsquo;t have Active Directory Domain Services installed. So we will do that with the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Install-WindowsFeature AD-Domain-Services,DNS -IncludeManagementTools
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now we promote our machine to DC. We will do this by creating a new &lt;a class="link" href="##AD-Basics" &gt;forest&lt;/a&gt;. Within our forest, our current machine is the DC and the DNS server. Once again, we are forced to reboot. After rebooting we can login back in as the admin and double check everything is working with the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Get-Service ADWS
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Get-Service DNS
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Get-ADDomain
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="3-basic-ad-config"&gt;3. Basic AD Config
&lt;/h2&gt;&lt;p&gt;Now we will create some basic &lt;a class="link" href="##AD-Basics" &gt;organization units&lt;/a&gt;. One for workstations, one for users, and one for groups. That can be done with the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;New-ADOrganizationalUnit -Name &lt;span style="color:#e6db74"&gt;&amp;#34;Workstations&amp;#34;&lt;/span&gt; -Path &lt;span style="color:#e6db74"&gt;&amp;#34;DC=lab,DC=local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;New-ADOrganizationalUnit -Name &lt;span style="color:#e6db74"&gt;&amp;#34;Users&amp;#34;&lt;/span&gt; -Path &lt;span style="color:#e6db74"&gt;&amp;#34;DC=lab,DC=local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;New-ADOrganizationalUnit -Name &lt;span style="color:#e6db74"&gt;&amp;#34;Groups&amp;#34;&lt;/span&gt; -Path &lt;span style="color:#e6db74"&gt;&amp;#34;DC=lab,DC=local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can verifying their creation with the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Get-ADOrganizationalUnit -Filter *
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can now create our first users, lets call her Alice:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;New-ADUser `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -Name &lt;span style="color:#e6db74"&gt;&amp;#34;Alice Johnson&amp;#34;&lt;/span&gt; `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -SamAccountName ajohnson `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -UserPrincipalName ajohnson@lab.local `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -Path &lt;span style="color:#e6db74"&gt;&amp;#34;OU=Users,DC=lab,DC=local&amp;#34;&lt;/span&gt; `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -AccountPassword (Read-Host -AsSecureString &lt;span style="color:#e6db74"&gt;&amp;#34;Password&amp;#34;&lt;/span&gt;) `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -Enabled $true
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can create a group as well:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;New-ADGroup `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -Name &lt;span style="color:#e6db74"&gt;&amp;#34;IT-Admins&amp;#34;&lt;/span&gt; `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -GroupScope Global `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -GroupCategory Security `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -Path &lt;span style="color:#e6db74"&gt;&amp;#34;OU=Groups,DC=lab,DC=local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then we can add lovely Alice to our newly created group:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Add-ADGroupMember -Identity &lt;span style="color:#e6db74"&gt;&amp;#34;IT-Admins&amp;#34;&lt;/span&gt; -Members ajohnson
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This create simplicity when applying security rules. If we were to get a new IT admin, we wouldn&amp;rsquo;t need to find all of Alice&amp;rsquo;s permission and copy them over to this new user we could simply add them to the already created IT-Admins group and this would be automatically done. This way we don&amp;rsquo;t have to mange users, we can just worry about groups. Similar to the principles of &lt;a class="link" href="https://en.wikipedia.org/wiki/Role-based_access_control" target="_blank" rel="noopener"
&gt;RBAC&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="4-configure-the-client"&gt;4. Configure the Client
&lt;/h2&gt;&lt;p&gt;At this point, Active Directory is installed, DNS is configured, and basic directory objects exist. The final step is to introduce a client machine and allow it to authenticate against the domain. Computer Objects in Active Directory Unlike users and groups, computer objects do not need to be created manually in most environments. When a Windows machine joins a domain, Active Directory automatically creates a corresponding computer object and establishes a trust relationship between the machine and the domain controller. By default, this computer object is placed in the built-in Computers container. But we will move this into a dedicated Organizational Unit so that policies and configuration can be applied consistently.&lt;/p&gt;
&lt;p&gt;Before joining the domain, the workstation must be able to locate the domain controller. Because Active Directory relies heavily on DNS, the workstation’s DNS server must point to the domain controller, not an external resolver. In the Windows setting we can configure a custom IP address and point to a custom DNS server using these settings:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;IP Address: 192.168.50.20
Subnet Mask: 255.255.255.0
DNS Server: 192.168.50.10
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We can test connectivity of the devices using ping:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ping 192.168.50.10
ping dc01
ping dc01.lab.local
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We could now join the domain. In Windows setting we can select out domain as ``lab.local```. We then authenticate with admin credentials and reboot.&lt;/p&gt;
&lt;h2 id="5-move-workstation-to-workstations-ou"&gt;5. Move Workstation to Workstations OU
&lt;/h2&gt;&lt;p&gt;To move this devices from the default &lt;code&gt;computers&lt;/code&gt; container over to the &lt;code&gt;workstations&lt;/code&gt; OU we first find the name of the computer with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Get-ADComputer -Filter *
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then we use that name in the following command to change its OU:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Move-ADObject `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -Identity &lt;span style="color:#e6db74"&gt;&amp;#34;CN=WIN11-CLIENT,CN=Computers,DC=lab,DC=local&amp;#34;&lt;/span&gt; `
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -TargetPath &lt;span style="color:#e6db74"&gt;&amp;#34;OU=Workstations,DC=lab,DC=local&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="6-final-test"&gt;6. Final Test
&lt;/h2&gt;&lt;p&gt;To test everything is working as expected we can login on the workstation as Alice. At the Windows login screen we enter Alice&amp;rsquo;s credentials and a successful login confirms:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DNS working&lt;/li&gt;
&lt;li&gt;Workstation trusted the domain&lt;/li&gt;
&lt;li&gt;AD authentication functioned end-to-end&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>